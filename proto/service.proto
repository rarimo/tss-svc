syntax = "proto3";

option go_package = "gitlab.com/rarify-protocol/tss-svc/pkg/types";

import "request.proto";
import "google/protobuf/any.proto";

service Service {
  rpc Submit(MsgSubmitRequest) returns (MsgSubmitResponse);
  rpc Info(MsgInfoRequest) returns (MsgInfoResponse);
  rpc Session(MsgSessionRequest) returns (MsgSessionResponse);
  rpc AddOperation(MsgAddOperationRequest) returns (MsgAddOperationResponse);
}

enum RequestType {
  Proposal = 0;
  Acceptance = 1;
  Sign = 2;
  Reshare = 3;
  Keygen = 4;
}

message MsgSubmitRequest {
  uint64 id = 1;
  string signature = 2;
  bool isBroadcast = 3;
  RequestType type = 4;
  google.protobuf.Any details = 5;
}

message MsgSubmitResponse {}

message MsgInfoRequest{}

message MsgInfoResponse {
  uint64 id = 1;
  uint64 start = 2;
  uint64 end = 3;
}

message MsgSessionRequest{
  uint64 id = 1;
}

message MsgSessionResponse {
  uint64 id = 1;
  uint64 start = 2;
  uint64 end = 3;
  string root = 6;
  repeated string indexes = 7;
  repeated string accepted = 8;
  string signature = 9;
}

message MsgAddOperationRequest {
  string index = 1;
}

message MsgAddOperationResponse {}